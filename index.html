<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Deck</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* GLOBAL ANIMATIONS */
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* --- THEME: FAMILY (Cozy, Warm, Modern) --- */
        body[data-mode="family"] {
            --bg: #FFF8F0; /* Soft Almond */
            --surface: #FFFFFF;
            --text-main: #4A403A;
            --text-sub: #8C8179;
            --accent: #FF7E5F; /* Coral */
            --accent-glow: rgba(255, 126, 95, 0.3);
            --border: #F0E6DD;
        }

        /* --- THEME: FRIENDS (Night Mode, Electric) --- */
        body[data-mode="friends"] {
            --bg: #0F172A; /* Deep Navy */
            --surface: #1E293B;
            --text-main: #F8FAFC;
            --text-sub: #94A3B8;
            --accent: #C084FC; /* Neon Purple */
            --accent-glow: rgba(192, 132, 252, 0.3);
            --border: #334155;
        }

        /* --- THEME: WORK (Clean, Professional, Trust) --- */
        body[data-mode="work"] {
            --bg: #F1F5F9; /* Cool Gray */
            --surface: #FFFFFF;
            --text-main: #0F172A;
            --text-sub: #64748B;
            --accent: #0284C7; /* Professional Blue */
            --accent-glow: rgba(2, 132, 199, 0.2);
            --border: #E2E8F0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            min-height: 100vh;
            padding: 40px 20px;
            transition: var(--transition);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        /* --- HEADER & TABS --- */
        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-weight: 800;
            font-size: 3rem;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-sub);
            margin-bottom: 30px;
        }

        /* The Pill Switcher */
        .mode-tabs {
            background: var(--surface);
            border: 1px solid var(--border);
            display: inline-flex;
            padding: 6px;
            border-radius: 50px;
            box-shadow: 0 4px 20px -5px rgba(0,0,0,0.05);
        }

        .tab-btn {
            background: transparent;
            border: none;
            padding: 10px 24px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            color: var(--text-sub);
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .tab-btn.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 15px var(--accent-glow);
        }

        /* --- GRID --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
        }

        /* --- CARDS (The "Premium" Look) --- */
        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            position: relative;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1);
            border-color: var(--accent);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .tag {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 800;
            color: var(--accent);
            background: var(--accent-glow);
            padding: 6px 12px;
            border-radius: 8px;
        }

        .card-content {
            flex-grow: 1;
            margin-bottom: 25px;
            font-size: 1.15rem;
            line-height: 1.6;
            color: var(--text-main);
            min-height: 80px;
            display: flex;
            align-items: center;
        }

        /* Specific Content Styling */
        .card-content p { width: 100%; }
        .card-content h3 { color: var(--accent); margin-bottom: 8px; font-size: 1.2rem; }
        .card-content blockquote {
            border-left: 4px solid var(--accent);
            padding-left: 16px;
            font-style: italic;
            color: var(--text-sub);
        }

        /* --- ACTION BUTTONS --- */
        .btn {
            background: var(--surface);
            border: 2px solid var(--border);
            color: var(--text-main);
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            border-color: var(--accent);
            color: var(--accent);
            background: var(--accent-glow);
        }

        .btn:active { transform: scale(0.98); }

        /* --- NOTES AREA --- */
        textarea {
            width: 100%;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            color: var(--text-main);
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            resize: vertical;
            min-height: 120px;
            transition: var(--transition);
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--accent);
            background: var(--surface);
            box-shadow: 0 0 0 4px var(--accent-glow);
        }

        /* --- LISTS --- */
        .check-list { list-style: none; }
        .check-list li {
            padding: 10px;
            background: var(--bg);
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- FOOTER CONTROLS --- */
        .footer-controls {
            margin-top: 40px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .footer-btn {
            background: transparent;
            border: none;
            color: var(--text-sub);
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .footer-btn:hover { color: var(--accent); text-decoration: underline; }

        /* Toast */
        #toast {
            visibility: hidden; min-width: 250px; background-color: var(--text-main); color: var(--bg);
            text-align: center; border-radius: 50px; padding: 16px; position: fixed;
            z-index: 100; left: 50%; bottom: 30px; transform: translateX(-50%);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); font-weight: 600;
        }
        #toast.show { visibility: visible; bottom: 50px; transition: 0.3s; }

        @media (max-width: 700px) {
            h1 { font-size: 2rem; }
            .mode-tabs { width: 100%; display: flex; }
            .tab-btn { flex: 1; padding: 10px 0; }
        }
    </style>
</head>
<body data-mode="family">

    <div class="container">
        <header>
            <h1 id="app-title">Family Deck</h1>
            <p class="subtitle">Meaningful conversations, made simple.</p>
            
            <div class="mode-tabs">
                <button class="tab-btn active" onclick="setMode('family')" id="tab-family">Family</button>
                <button class="tab-btn" onclick="setMode('friends')" id="tab-friends">Friends</button>
                <button class="tab-btn" onclick="setMode('work')" id="tab-work">Work</button>
            </div>
        </header>

        <div class="grid">
            
            <div class="card">
                <div class="card-header"><span class="tag" id="tag-1">Warm Up</span></div>
                <div class="card-content" id="content-iceBreaker">
                    <p>Click below to start...</p>
                </div>
                <button class="btn" onclick="generate('iceBreaker')" id="btn-1">Draw Card</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-2">Check In</span></div>
                <div class="card-content" style="display:block;">
                    <ul class="check-list" id="list-checkin">
                        </ul>
                </div>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="participantCount" placeholder="#" style="width: 60px; text-align: center; border: 1px solid var(--border); border-radius: 8px;">
                    <button class="btn" onclick="generateOrder()">Pick Order</button>
                </div>
                <div id="checkInOrder" style="margin-top: 10px; font-weight: bold; color: var(--accent); font-size: 0.9rem;"></div>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-3">Deep Dive</span></div>
                <div class="card-content" id="content-dynamic">
                    <p>Ready for the main event?</p>
                </div>
                <button class="btn" onclick="generate('dynamic')" id="btn-3">Next</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-4">Learn</span></div>
                <div class="card-content" id="content-skill">
                    <p>Learn something new.</p>
                </div>
                <button class="btn" onclick="generate('skill')" id="btn-4">Teach Me</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag">Humor</span></div>
                <div class="card-content" id="content-joke">
                    <p>Need a laugh?</p>
                </div>
                <button class="btn" onclick="generateJoke()">Tell Joke</button>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-header"><span class="tag">Notes</span></div>
                <textarea id="notes" placeholder="Capture key moments here... (Auto-saved)"></textarea>
                <div style="margin-top: 15px; text-align: center;">
                    <button class="btn" style="width: auto; display: inline-flex;" onclick="copyNotes()">Copy to Clipboard</button>
                </div>
            </div>

        </div>

        <div class="footer-controls">
            <button class="footer-btn" onclick="alert('Rules: 1. No Phones. 2. Listen. 3. Have Fun.')">View Rules</button>
            <button class="footer-btn" onclick="if(confirm('Clear all data?')) { localStorage.clear(); location.reload(); }">Reset App</button>
        </div>
    </div>

    <div id="toast">Copied!</div>

<script>
    // --- 1. THE MASSIVE DATABASE (INCREASED!) ---
    
    const db = {
        family: {
            title: "Family Deck",
            subtitle: "Meaningful conversations, made simple.",
            tags: ["Ice Breaker", "Rose, Bud, Thorn", "Story Time", "Life Skill"],
            btns: ["Get Question", "Read Story", "Learn Skill"],
            checkin: [
                "ðŸŒ¹ <strong>Rose:</strong> Best part of your week.",
                "ðŸŒµ <strong>Thorn:</strong> Hardest part of your week.",
                "ðŸŒ± <strong>Bud:</strong> What are you looking forward to?"
            ],
            iceBreakers: [
                "If you could have a walk-up song play every time you entered a room, what would it be?",
                "What's a small thing that happened this week that made you happy?",
                "If you could instantly become an expert in one thing, what would it be?",
                "What's the most interesting thing you've learned recently?",
                "If you could talk to animals, which animal would you have the most interesting conversation with?",
                "What's a fictional world you would love to live in for a week?",
                "If you had to describe our family as a type of food, what would we be?",
                "What's a weird food combination that you secretly love?",
                "If you could add a new, magical room to our house, what would it be?",
                "What movie or TV show character do you think is most like you?",
                "If you could design a new planet, what would be its main feature?",
                "What's the best smell in the world?",
                "What's a family tradition you think we should start?",
                "If you could create a new holiday, what would it celebrate?",
                "What's the funniest thing that's ever happened to you?",
                "If you could have any job for just one day, what would you choose?",
                "What's something you're really proud of that you did this week?",
                "If you could have any mythical creature as a pet, what would it be?",
                "What's the most beautiful place you've ever seen?",
                "If you could solve one of the world's mysteries, which one would you pick?",
                "What's one thing you hope to accomplish in the next year?",
                "If you could have a super-power that was only useful for doing chores, what would it be?",
                "What's your favorite thing about the person sitting to your left?",
                "If you could be a movie director, what kind of movie would you make?",
                "What's a word you love the sound of?",
                "If you could have a dinner party with three characters from books, who would you invite?",
                "What's a simple pleasure that always makes your day better?",
                "If our family was a sports team, what would our team name be?",
                "What's the best piece of advice you've ever received?",
                "If you could only listen to three songs for the rest of your life, what would they be?",
                "What's something you're looking forward to this month?",
                "If you could have a conversation with any historical figure, who would it be?",
                "What's the most interesting dream you've had recently?",
                "If you had to eat one color of food for a whole day, which color would you choose?",
                "What's something that always makes you laugh without fail?",
                "If you could be a world-famous expert on any topic, what would it be?",
                "What's your favorite memory of just our family?",
                "If you could design a new ride for an amusement park, what would it do?",
                "What's a small act of kindness you saw or did this week?",
                "If you could instantly learn any musical instrument, which one would you pick?",
                "What's the best part about being your current age?",
                "If you could have a magical portal in your room, where would it lead?",
                "What's a question you wish people would ask you more often?",
                "If you could create a new flavor of chips or ice cream, what would it be?",
                "What's a skill you think everyone in our family should learn?",
                "If you could be the main character in any video game, which one would it be?",
                "If you could combine two animals to make one new super-animal, what would you combine?",
                "What's a food that you think is seriously underrated?",
                "If you could have any view from your bedroom window, what would it be?",
                "What's something you've done that you thought was impossible at first?",
                "What's something you're really good at that might surprise people?",
                "If you could have any artist's musical talent, whose would you choose?",
                "If you could ask your future self one question, what would it be?",
                "If you were a color, what color would you be and why?",
                "What is your favorite item of clothing you own?",
                "If you could master one instrument instantly, which one?",
                "What is the first thing you notice about a person?",
                "What is your favorite board game?",
                "If you could invent a gadget, what would it do?",
                "What is the best gift you have ever given?",
                "If you could pause time for one hour a day, what would you do?"
            ],
            dynamics: [ // Moral Stories
                { title: "The Lion and the Mouse", body: "A lion spared a mouse. Later, the lion was trapped in a net. The mouse chewed the ropes to free him. Moral: Little friends may prove great friends." },
                { title: "The Tortoise and the Hare", body: "The hare bragged about speed and took a nap. The tortoise kept moving slow and steady. The tortoise won. Moral: Consistency beats intensity." },
                { title: "The Boy Who Cried Wolf", body: "A boy lied about a wolf attacking. When a real wolf came, no one believed him. Moral: Liars are not believed even when they speak the truth." },
                { title: "The Bundle of Sticks", body: "A father showed his sons that a single stick breaks easily, but a bundle is unbreakable. Moral: Unity is strength." },
                { title: "The Ant and the Grasshopper", body: "The ant worked all summer storing food. The grasshopper played. In winter, the ant was safe, the grasshopper starved. Moral: Work today for a better tomorrow." },
                { title: "The Dog and the Shadow", body: "A dog with a bone saw his reflection in the water. He thought the 'other dog' had a bigger bone. He barked to get it and dropped his own bone in the river. Moral: Greed causes you to lose what you have." },
                { title: "The Crow and the Pitcher", body: "A thirsty crow found a pitcher with water at the bottom. He couldn't reach it. He dropped stones in one by one until the water rose to the top. Moral: Little by little does the trick." },
                { title: "The Wind and the Sun", body: "They bet on who could make a man take off his coat. The Wind blew hard, the man held tight. The Sun shone warmly, the man took it off. Moral: Gentleness is stronger than force." },
                { title: "The Fox and the Grapes", body: "A fox tried to reach hanging grapes but failed. He walked away saying, 'They were probably sour anyway.' Moral: It is easy to despise what you cannot have." },
                { title: "The Two Goats", body: "Two goats met on a narrow bridge. Neither would move back. They locked horns and both fell into the river. Moral: Stubbornness leads to disaster." },
                { title: "The Milkmaid", body: "A girl carried milk on her head, dreaming of selling it to buy eggs, then chicks, then a dress. She tossed her head in excitement and spilled the milk. Moral: Don't count your chickens before they hatch." },
                { title: "The Golden Goose", body: "A man had a goose that laid golden eggs. Impatient to get all the gold, he killed it, only to find it was empty inside. Moral: Greed destroys the source of good." },
                { title: "The Oak and the Reed", body: "A strong oak boasted it could stand any storm. A thin reed said it would bend. The storm came; the oak broke, the reed bent and survived. Moral: Flexibility is stronger than rigidity." },
                { title: "The Miller, Son, and Donkey", body: "A man and son tried to please everyone while walking their donkey. They carried it, rode it, walked it. In the end, they pleased no one and lost the donkey. Moral: Try to please everyone and you please no one." },
                { title: "The Fox and the Crow", body: "A crow had cheese. A fox flattered her singing voice. The crow opened her mouth to sing and dropped the cheese. Moral: Beware of flatterers." },
                { title: "The Empty Pot", body: "The Emperor gave seeds to children to see who could grow the best flower. One boy's seed never grew. He brought the empty pot. The Emperor rewarded his honesty because the seeds were cooked. Moral: Honesty is better than success based on lies." },
                { title: "The Stone Soup", body: "Travelers arrived in a village with nothing but a pot. They boiled a stone. Villagers grew curious and added carrots, then potatoes, then meat. Soon, the whole village shared a feast. Moral: Sharing creates abundance from nothing." },
                { title: "The Elephant and the Rope", body: "A huge elephant was tied by a small rope. It didn't break it because as a baby, it learned it couldn't. It never tried again. Moral: Do not let past failure limit your future power." },
                { title: "The Starfish Story", body: "A man saw a boy throwing starfish back into the sea. 'There are thousands,' said the man, 'You can't make a difference.' The boy threw one more. 'I made a difference to that one.' Moral: Every small act matters." },
                { title: "The Farmer and the Horse", body: "A farmer's horse ran away. Neighbors said 'Bad luck.' Farmer said 'Maybe.' Horse returned with wild horses. 'Good luck.' 'Maybe.' Son broke leg riding. 'Bad luck.' 'Maybe.' Army draft skipped son due to leg. Moral: Do not judge events too quickly; we do not know the end." }
            ],
            skills: [
                { title: "The Perfect Handshake", body: "Stand up. Make eye contact. Smile. Grip firmly (web to web). Shake twice. Release. It builds instant respect." },
                { title: "The 2-Minute Rule", body: "If a task takes less than 2 minutes (hanging a coat, washing a dish), do it immediately. Never add it to a to-do list." },
                { title: "Active Listening", body: "When someone talks, look at them. Do not think about your response. Just listen. When they finish, ask one question about what they said." },
                { title: "Box Breathing", body: "Anxiety hack: Breathe in for 4 seconds. Hold for 4 seconds. Exhale for 4 seconds. Hold for 4 seconds. Repeat." },
                { title: "How to Apologize", body: "A real apology has 3 parts: 1. 'I am sorry.' 2. 'It was my fault because...' 3. 'Next time I will...' Without part 3, it is just an excuse." },
                { title: "Budgeting 50/30/20", body: "Money rule: 50% for Needs (Rent/Food). 30% for Wants (Fun). 20% for Savings. Always pay your savings first." },
                { title: "Tying a Square Knot", body: "Right over Left. Left over Right. This knot will not slip, but is easy to untie. It is the most useful knot in the world." },
                { title: "Table Manners", body: "Wait until everyone is served before eating. Chew with your mouth closed. Keep elbows off the table while eating. It shows respect for the cook." },
                { title: "The Gratitude Pivot", body: "When you complain ('I have to go to school'), switch 'Have' to 'Get'. 'I GET to go to school.' It changes your brain chemistry." },
                { title: "Changing a Tire", body: "Loosen nuts BEFORE jacking up the car. Jack it up. Remove nuts. Swap tire. Tighten nuts by hand. Lower car. Tighten nuts fully." },
                { title: "How to Introduce People", body: "Say the name of the older/higher status person first. 'Grandma, this is my friend Sam.' It shows social grace." },
                { title: "Sewing a Button", body: "Thread needle. Knot end. Go up through hole, down through other. Repeat 6 times. Wrap thread around the 'neck' of button. Tie off." },
                { title: "Map Reading", body: "Find North. Orient the map so it matches the land in front of you. Don't just follow the blue dot." },
                { title: "Making a Bed", body: "Hospital corners: Tuck the foot. Lift the side of the sheet, tuck the excess triangle under, then drop the side. Crisp and tight." },
                { title: "Remembering Names", body: "When introduced, say their name back immediately. 'Nice to meet you, Sarah.' Visualize 'Sarah' written on her forehead." },
                { title: "Writing a Thank You Note", body: "1. Salutation. 2. Mention the specific gift. 3. Say how you will use it. 4. Mention seeing them soon. 5. Sign off." },
                { title: "Doing Laundry", body: "Separate lights and darks. Check pockets! Use cold water to save energy and clothes. Fold immediately to avoid wrinkles." },
                { title: "Scrambling an Egg", body: "Low heat is key. Whisk with a splash of milk. Pour into buttered pan. Push gently with spatula. Don't over
