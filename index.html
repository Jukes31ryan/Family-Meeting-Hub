<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Deck</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --transition: all 0.2s ease-in-out; }

        /* --- THEME: HOUSEHOLD (Cozy & Warm) --- */
        body[data-mode="family"] { --bg: #FFF8F0; --surface: #FFFFFF; --text-main: #4A403A; --text-sub: #8C8179; --accent: #FF7E5F; --accent-glow: rgba(255, 126, 95, 0.15); --border: #F0E6DD; }
        /* --- THEME: SOCIAL (Night & Neon) --- */
        body[data-mode="friends"] { --bg: #0F172A; --surface: #1E293B; --text-main: #F8FAFC; --text-sub: #94A3B8; --accent: #C084FC; --accent-glow: rgba(192, 132, 252, 0.15); --border: #334155; }
        /* --- THEME: TEAM (Clean & Professional) --- */
        body[data-mode="work"] { --bg: #F1F5F9; --surface: #FFFFFF; --text-main: #0F172A; --text-sub: #64748B; --accent: #0284C7; --accent-glow: rgba(2, 132, 199, 0.1); --border: #E2E8F0; }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background-color: var(--bg); color: var(--text-main); min-height: 100vh; padding: 40px 20px; transition: var(--transition); display: flex; flex-direction: column; }
        
        /* Adjusted width for a perfect 3x3 layout on desktop */
        .container { max-width: 1250px; margin: 0 auto; flex-grow: 1; width: 100%; }

        header { text-align: center; margin-bottom: 40px; }
        h1 { font-weight: 800; font-size: 3rem; margin-bottom: 10px; letter-spacing: -1px; transition: var(--transition); }
        .subtitle { font-size: 1.1rem; color: var(--text-sub); margin-bottom: 30px; transition: var(--transition); }

        .mode-tabs { background: var(--surface); border: 1px solid var(--border); display: inline-flex; padding: 6px; border-radius: 50px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); transition: var(--transition); }
        .tab-btn { background: transparent; border: none; padding: 10px 30px; border-radius: 30px; cursor: pointer; font-family: 'Outfit', sans-serif; font-weight: 600; color: var(--text-sub); transition: var(--transition); font-size: 1rem; }
        .tab-btn.active { background: var(--accent); color: white; box-shadow: 0 4px 10px var(--accent-glow); }

        /* THE 3x3 GRID */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px; }
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 25px; display: flex; flex-direction: column; transition: var(--transition); box-shadow: 0 4px 10px rgba(0,0,0,0.03); height: 100%; }
        .card:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,0.08); border-color: var(--accent); }

        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .tag { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 800; color: var(--accent); background: var(--accent-glow); padding: 6px 12px; border-radius: 8px; transition: var(--transition); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .card-content { flex-grow: 1; margin-bottom: 25px; font-size: 1.1rem; line-height: 1.6; color: var(--text-main); min-height: 80px; display: flex; align-items: center; animation: fadeIn 0.3s ease-out; }
        .card-content p { width: 100%; }
        .card-content h3 { color: var(--accent); margin-bottom: 6px; font-size: 1.2rem; transition: var(--transition); }
        .quote-style { border-left: 4px solid var(--accent); padding-left: 15px; font-style: italic; font-weight: 600; transition: var(--transition); }

        .check-list { list-style: none; width: 100%; }
        .check-list li { padding: 8px 12px; background: var(--bg); margin-bottom: 8px; border-radius: 8px; font-size: 0.95rem; color: var(--text-main); transition: var(--transition); }

        .btn { background: var(--surface); border: 2px solid var(--border); color: var(--text-main); width: 100%; padding: 14px; border-radius: 12px; font-weight: 700; font-family: 'Outfit', sans-serif; cursor: pointer; transition: var(--transition); }
        .btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-glow); }
        .btn:active { transform: scale(0.98); }

        .counter-group { display: flex; align-items: center; gap: 10px; width: 100%; }
        .counter-btn { width: 45px; height: 45px; border-radius: 12px; background: var(--bg); border: 1px solid var(--border); font-size: 1.5rem; font-weight: bold; color: var(--text-main); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition); }
        .counter-btn:hover { background: var(--accent-glow); color: var(--accent); border-color: var(--accent); }
        .counter-val { flex-grow: 1; text-align: center; font-size: 1.2rem; font-weight: 800; }

        .revenue-banner { margin-top: 50px; text-align: center; padding: 20px; border-top: 1px solid var(--border); font-size: 0.95rem; color: var(--text-sub); transition: var(--transition); }
        .revenue-banner a { color: var(--accent); font-weight: 700; text-decoration: none; padding: 5px 10px; background: var(--accent-glow); border-radius: 6px; margin-left: 5px; transition: var(--transition); }
        .revenue-banner a:hover { opacity: 0.8; }

        @media (max-width: 600px) { h1 { font-size: 2.2rem; } .mode-tabs { width: 100%; display: flex; } .tab-btn { flex: 1; padding: 10px 0; } }
    </style>
</head>
<body data-mode="family">

    <div class="container">
        <header>
            <h1 id="app-title">Home Deck</h1>
            <p class="subtitle" id="app-subtitle">Meaningful conversations, no screens required.</p>
            
            <div class="mode-tabs">
                <button class="tab-btn active" onclick="setMode('family')" id="tab-family">Household</button>
                <button class="tab-btn" onclick="setMode('friends')" id="tab-friends">Social</button>
                <button class="tab-btn" onclick="setMode('work')" id="tab-work">Team</button>
            </div>
        </header>

        <div class="grid">
            
            <div class="card">
                <div class="card-header"><span class="tag" id="tag-1">Warm Up</span></div>
                <div class="card-content" id="content-iceBreaker"><p>Loading...</p></div>
                <button class="btn" onclick="generate('iceBreaker')" id="btn-1">Next Question</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-2">Check In</span></div>
                <div class="card-content" style="display:block;">
                    <ul class="check-list" id="list-checkin"></ul>
                </div>
                <div class="counter-group">
                    <button class="counter-btn" onclick="adjustCount(-1)">-</button>
                    <span class="counter-val" id="count-display">4 People</span>
                    <button class="counter-btn" onclick="adjustCount(1)">+</button>
                    <button class="btn" style="width: auto; padding: 0 20px; height: 45px;" onclick="generateOrder()">Order</button>
                </div>
                <div id="checkInOrder" style="margin-top: 10px; font-weight: bold; color: var(--accent); font-size: 0.95rem; text-align: center;"></div>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-3">Wisdom</span></div>
                <div class="card-content" id="content-quote"><p class="quote-style">Loading...</p></div>
                <button class="btn" onclick="generate('quote')" id="btn-3">Next Quote</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-4">Lesson</span></div>
                <div class="card-content" id="content-dynamic"><p>Loading...</p></div>
                <button class="btn" onclick="generate('dynamic')" id="btn-4">Next Lesson</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag">Humor</span></div>
                <div class="card-content" id="content-joke"><p>Loading...</p></div>
                <button class="btn" onclick="generateJoke()">Next Joke</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-6">Growth</span></div>
                <div class="card-content" id="content-skill"><p>Loading...</p></div>
                <button class="btn" onclick="generate('skill')" id="btn-6">Next Skill</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-7">Connection</span></div>
                <div class="card-content" id="content-praise"><p>Loading...</p></div>
                <button class="btn" onclick="generate('praise')" id="btn-7">Next Prompt</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-8">Focus</span></div>
                <div class="card-content" id="content-goal"><p>Loading...</p></div>
                <button class="btn" onclick="generate('goal')" id="btn-8">Next Goal</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="tag" id="tag-9">Wonder</span></div>
                <div class="card-content" id="content-fact"><p>Loading...</p></div>
                <button class="btn" onclick="generateFact()">Get Fact</button>
            </div>

        </div>

        <div class="revenue-banner">
            <span id="ad-text">Put the screens away.</span> 
            <a href="https://amazon.com" target="_blank" id="ad-link">Get the Physical Deck on Amazon &rarr;</a>
        </div>
    </div>

<script>
    // ==========================================
    // THE 3x3 MASTER DATABASE 
    // ==========================================
    const db = {
        family: {
            title: "Home Deck",
            subtitle: "Meaningful conversations, no screens required.",
            tags: ["Ice Breaker", "Rose, Bud, Thorn", "Wisdom", "Cheat Code", "Humor", "Life Skill", "Gratitude", "Look Ahead", "Cool Fact"],
            btns: ["Next Question", "Pick Order", "Next Quote", "Read Lesson", "Next Joke", "Next Skill", "Show Appreciation", "Set Goal"],
            checkin: ["üåπ <strong>Rose:</strong> Best part of your week.", "üåµ <strong>Thorn:</strong> Hardest part of your week.", "üå± <strong>Bud:</strong> What are you looking forward to?"],
            
            // NEW CATEGORY: CONNECTION / GRATITUDE
            praise: [
                "Give a compliment to the person sitting to your left.",
                "Who in this family helped you the most this week?",
                "What is one thing you appreciate about Mom/Dad?",
                "Share one thing that made you proud of your sibling/child this week.",
                "Thank someone at this table for a specific thing they did.",
                "What is your favorite memory made with the person across from you?"
            ],
            // NEW CATEGORY: GOALS / FOCUS
            goal: [
                "What is one bad habit we should try to stop this week?",
                "What is a fun activity we should plan for the upcoming weekend?",
                "What is one chore that has been ignored that we need to tackle?",
                "What is a personal goal you have for this week at school/work?",
                "What's for dinner tomorrow? Let's vote.",
                "Is there anything on the calendar this week that we need to prepare for?"
            ],

            iceBreakers: [
                "If you could have a walk-up song play every time you entered a room, what would it be?", "What's a small thing that happened this week that made you happy?", "If you could instantly become an expert in one thing, what would it be?", "What's the most interesting thing you've learned recently?", "If you could talk to animals, which animal would you have the most interesting conversation with?", "What's a fictional world you would love to live in for a week?", "If you had to describe our family as a type of food, what would we be?", "What's a weird food combination that you secretly love?", "If you could add a new, magical room to our house, what would it be?", "What movie or TV show character do you think is most like you?", "If you could design a new planet, what would be its main feature?", "What's the best smell in the world?", "What's a family tradition you think we should start?", "If you could create a new holiday, what would it celebrate?", "What's the funniest thing that's ever happened to you?", "If you could have any job for just one day, what would you choose?", "What's something you're really proud of that you did this week?", "If you could have any mythical creature as a pet, what would it be?", "What's the most beautiful place you've ever seen?", "If you could solve one of the world's mysteries, which one would you pick?", "What's one thing you hope to accomplish in the next year?", "If you could have a super-power that was only useful for doing chores, what would it be?", "What's your favorite thing about the person sitting to your left?", "If you could be a movie director, what kind of movie would you make?", "What's a word you love the sound of?", "If you could have a dinner party with three characters from books, who would you invite?", "What's a simple pleasure that always makes your day better?", "If our family was a sports team, what would our team name be?", "What's the best piece of advice you've ever received?", "If you could only listen to three songs for the rest of your life, what would they be?", "What's something you're looking forward to this month?", "If you could have a conversation with any historical figure, who would it be?", "What's the most interesting dream you've had recently?", "If you had to eat one color of food for a whole day, which color would you choose?", "What's something that always makes you laugh without fail?", "If you could be a world-famous expert on any topic, what would it be?", "What's your favorite memory of just our family?", "If you could design a new ride for an amusement park, what would it do?", "What's a small act of kindness you saw or did this week?", "If you could instantly learn any musical instrument, which one would you pick?", "What's the best part about being your current age?", "If you could have a magical portal in your room, where would it lead?", "What's a question you wish people would ask you more often?", "If you could create a new flavor of chips or ice cream, what would it be?", "What's a skill you think everyone in our family should learn?", "If you could be the main character in any video game, which one would it be?", "If you could combine two animals to make one new super-animal, what would you combine?", "What's a food that you think is seriously underrated?", "If you could have any view from your bedroom window, what would it be?", "What's something you've done that you thought was impossible at first?", "What's something you're really good at that might surprise people?", "If you could have any artist's musical talent, whose would you choose?", "If you could ask your future self one question, what would it be?"
            ],
            quotes: [
                { text: "Family is not an important thing. It's everything.", author: "Michael J. Fox" }, { text: "The love of a family is life's greatest blessing.", author: "Unknown" }, { text: "In time of test, family is best.", author: "Burmese Proverb" }, { text: "The strength of a family, like the strength of an army, is in its loyalty to each other.", author: "Mario Puzo" }, { text: "What can you do to promote world peace? Go home and love your family.", author: "Mother Teresa" }, { text: "A happy family is but an earlier heaven.", author: "George Bernard Shaw" }, { text: "No act of kindness, no matter how small, is ever wasted.", author: "Aesop" }, { text: "Alone we can do so little; together we can do so much.", author: "Helen Keller" }, { text: "If you want to lift yourself up, lift up someone else.", author: "Booker T. Washington" }, { text: "Do what you can, with what you have, where you are.", author: "Theodore Roosevelt" }, { text: "Family means no one gets left behind or forgotten.", author: "David Ogden Stiers" }, { text: "Home is where you are loved the most and act the worst.", author: "Marjorie Pay Hinckley" }, { text: "The memories we make with our family is everything.", author: "Candace Cameron Bure" }, { text: "Family is a life jacket in the stormy sea of life.", author: "J.K. Rowling" }, { text: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius" }
            ],
            dynamics: [ 
                { title: "The Level 99 Boss", body: "Alex played video games all week instead of working on his big school project. By Sunday night, he was exhausted and his project looked terrible.<br><br><strong>üîë Cheat Code:</strong> Defeat the big monster (your homework) <i>before</i> you play the game." },
                { title: "The Broken Controller", body: "Sam accidentally broke his brother's controller and blamed the dog. His brother used his allowance to buy a new one. Sam felt so guilty he couldn't enjoy playing anymore.<br><br><strong>üîë Cheat Code:</strong> The truth hurts for a minute. A lie hurts for a week." },
                { title: "The Sideline Superstar", body: "Mia didn't pass the ball during the soccer game because she wanted to score the winning goal herself. She missed. Her team lost.<br><br><strong>üîë Cheat Code:</strong> You can only win the championship if you trust your teammates." },
                { title: "The Missing Hoodie", body: "Jake lost his favorite hoodie because he threw it on the floor instead of hanging it up. He was freezing at the bus stop the next morning.<br><br><strong>üîë Cheat Code:</strong> Take care of your things, and your things will take care of you." },
                { title: "The Interrupter", body: "Leo was so excited to tell his story that he kept interrupting his dad. Dad got frustrated and walked away. Leo never got to tell his story.<br><br><strong>üîë Cheat Code:</strong> If you want to be heard, you have to let other people finish talking first." },
                { title: "The Boring Dinner", body: "Maya complained about having chicken for dinner again. Instead of getting mad, her mom just took the plate away. Maya went to bed hungry.<br><br><strong>üîë Cheat Code:</strong> Complain about what you have, and you might just lose it." },
                { title: "The 1% Rule", body: "Liam wanted to do 50 pushups. He tried to do them all at once on day one and pulled a muscle. His friend did 5 a day for 10 days and got way stronger.<br><br><strong>üîë Cheat Code:</strong> Slow and steady always beats fast and reckless." },
                { title: "The Rumor Mill", body: "Chloe repeated a rumor about the new kid at school to fit in with the popular group. The new kid found out and cried. Chloe didn't look cool; she just looked mean.<br><br><strong>üîë Cheat Code:</strong> Be a shield for others, not a sword." },
                { title: "The Half-Done Chore", body: "Max rushed through sweeping the floor so he could go outside. His dad made him come back in and do it again. Max missed the whole afternoon.<br><br><strong>üîë Cheat Code:</strong> Do it right the first time, or you'll be doing it twice." },
                { title: "The Forgotten Password", body: "Ava used the same easy password for everything. A hacker got into her account and deleted her game save files. Years of work were gone.<br><br><strong>üîë Cheat Code:</strong> Shortcuts today often lead to disasters tomorrow." },
                { title: "The Angry Text", body: "Eli got mad at his friend and sent a mean text message. Once he hit 'send', he couldn't take it back. His friend didn't speak to him for a month.<br><br><strong>üîë Cheat Code:</strong> Anger is temporary. Written words are permanent. Cool down before you type." },
                { title: "The Heavy Backpack", body: "Zoe carried all her textbooks home every day just in case she needed them. Her back hurt so much she couldn't play outside.<br><br><strong>üîë Cheat Code:</strong> Don't carry burdens you don't need to. Plan ahead." },
                { title: "The 'I'm Bored' Trap", body: "When Owen said 'I'm bored', his parents gave him a sponge and told him to clean the baseboards. He suddenly found something fun to do.<br><br><strong>üîë Cheat Code:</strong> Only boring people get bored. Use your imagination." },
                { title: "The Silent Helper", body: "Lily picked up the trash in the hallway even though she didn't drop it. A teacher saw her and gave her a 'Good Citizen' award the next day.<br><br><strong>üîë Cheat Code:</strong> Character is what you do when you think no one is looking." },
                { title: "The Phone Zombie", body: "Caleb stared at his phone during the entire family movie night. The next day, he realized he didn't remember any of the jokes everyone was laughing about.<br><br><strong>üîë Cheat Code:</strong> The best memories happen in the real world, not on a screen." },
                { title: "The Blame Game", body: "When the lamp broke, the brothers blamed each other. Because neither would admit it, they both got grounded. <br><br><strong>üîë Cheat Code:</strong> Taking responsibility is hard, but it earns you respect." },
                { title: "The Unpacked Bag", body: "Emma left her lunchbox in her backpack all weekend. On Monday, it smelled like rotten milk and she had to use a brown paper bag.<br><br><strong>üîë Cheat Code:</strong> Deal with small messes immediately before they become big, smelly problems." },
                { title: "The Bad Mood", body: "Jackson had a bad day at school and took it out on his little brother at home. Now two people were having a bad day.<br><br><strong>üîë Cheat Code:</strong> Emotions are contagious. Spread the good ones, contain the bad ones." },
                { title: "The Missed Alarm", body: "Noah stayed up until 2 AM watching videos. He slept through his alarm, missed the bus, and had to walk to school in the rain.<br><br><strong>üîë Cheat Code:</strong> Sleep is a weapon. If you don't charge your battery, you can't win the day." },
                { title: "The Easy Path", body: "Mia copied her friend's math homework to save time. When the test came, she didn't know how to solve any of the problems and failed.<br><br><strong>üîë Cheat Code:</strong> The hard way is the only way that actually makes you smarter." }
            ],
            skills: [
                { title: "The Perfect Handshake", body: "Stand up. Make eye contact. Smile. Grip firmly (web to web). Shake twice. Release. It builds instant respect." }, { title: "The 2-Minute Rule", body: "If a task takes less than 2 minutes (hanging a coat, washing a dish), do it immediately. Never add it to a to-do list." }, { title: "Active Listening", body: "When someone talks, look at them. Do not think about your response. Just listen. When they finish, ask one question about what they said." }, { title: "Box Breathing", body: "Anxiety hack: Breathe in for 4 seconds. Hold for 4 seconds. Exhale for 4 seconds. Hold for 4 seconds. Repeat." }, { title: "How to Apologize", body: "A real apology has 3 parts: 1. 'I am sorry.' 2. 'It was my fault because...' 3. 'Next time I will...' Without part 3, it is just an excuse." }, { title: "Budgeting 50/30/20", body: "Money rule: 50% for Needs (Rent/Food). 30% for Wants (Fun). 20% for Savings. Always pay your savings first." }, { title: "Table Manners", body: "Wait until everyone is served before eating. Chew with your mouth closed. Keep elbows off the table while eating. It shows respect for the cook." }, { title: "The Gratitude Pivot", body: "When you complain ('I have to go to school'), switch 'Have' to 'Get'. 'I GET to go to school.' It changes your brain chemistry." }, { title: "Changing a Tire", body: "Loosen nuts BEFORE jacking up the car. Jack it up. Remove nuts. Swap tire. Tighten nuts by hand. Lower car. Tighten nuts fully." }, { title: "How to Introduce People", body: "Say the name of the older/higher status person first. 'Grandma, this is my friend Sam.' It shows social grace." }, { title: "Making a Bed", body: "Hospital corners: Tuck the foot. Lift the side of the sheet, tuck the excess triangle under, then drop the side. Crisp and tight." }, { title: "Remembering Names", body: "When introduced, say their name back immediately. 'Nice to meet you, Sarah.' Visualize 'Sarah' written on her forehead." }, { title: "Writing a Thank You Note", body: "1. Salutation. 2. Mention the specific gift. 3. Say how you will use it. 4. Mention seeing them soon. 5. Sign off." }, { title: "Doing Laundry", body: "Separate lights and darks. Check pockets! Use cold water to save energy and clothes. Fold immediately to avoid wrinkles." }, { title: "Unclogging a Sink", body: "Pour boiling water first. Then 1/2 cup baking soda, followed by 1/2 cup vinegar. Cover for 10 mins. Flush with boiling water." }, { title: "Treating a Burn", body: "Run cool (not freezing) water over it for 10 minutes. Do not pop blisters. Cover loosely with sterile gauze." }, { title: "Checking Oil", body: "Park on flat ground. Pull dipstick, wipe clean. Re-insert fully. Pull out and check if oil is between min/max lines." }, { title: "Turning off Water Valve", body: "If a pipe bursts, find the main valve (usually in basement/garage). Turn clockwise until tight. Open faucets to drain." }
            ],
            ad_text: "Put the screens away.",
            ad_link: "Get the 'TableTopics' Deck for your kitchen table &rarr;"
        },
        friends: {
            title: "The Hangout",
            subtitle: "Less scrolling, more talking.",
            tags: ["Vibe Check", "Highs & Lows", "Wisdom", "Hot Takes", "Humor", "Party Trick", "Roast/Toast", "Next Up", "Cool Fact"],
            btns: ["Next Question", "Pick Order", "Next Quote", "Next Debate", "Next Joke", "Next Trick", "Show Love", "What's Next"],
            checkin: ["üî• <strong>Fire:</strong> Best thing recently.", "üßä <strong>Ice:</strong> Something annoying.", "üç∫ <strong>Drink:</strong> What are we drinking?"],
            
            praise: [
                "Toast to someone at this table who accomplished something big recently.",
                "Roast: Who is the most likely to get arrested, and why?",
                "Give a shoutout to the person who makes the group chat the funniest.",
                "Who has the best fashion sense in the room right now?",
                "Compliment the host on something specific.",
                "Name one thing you admire about the person across from you."
            ],
            goal: [
                "What is one place we need to travel to together?",
                "When is the next hangout, and who is hosting?",
                "What movie or TV show should we all watch before we meet up next?",
                "What is one hobby or activity we should try as a group?",
                "Who is ordering the Uber eats tonight?"
            ],

            iceBreakers: [
                "Worst date you've ever been on?", "What is a 'Red Flag' you ignore in dating?", "If you won the lottery, what's the first thing you buy?", "Who here would die first in a zombie apocalypse?", "What is your go-to karaoke song?", "What is the weirdest thing you find attractive?", "If you could get away with a crime, what would it be?", "What was your most embarrassing moment in high school?", "If you could swap lives with one celebrity, who would it be?", "What is your guilty pleasure TV show?", "What is the worst trend you ever followed?", "If you were an alcoholic drink, what would you be?", "What is your biggest pet peeve?", "If you could have dinner with three people (dead or alive), who?", "What is the best concert you have ever been to?", "Have you ever ghosted someone?", "What is a lie you tell often?", "What is the craziest thing you have done for love?", "What is your unpopular food opinion?", "Who is your celebrity crush?", "What's the worst advice you've ever taken?", "Have you ever been caught doing something you shouldn't?", "What is your signature dance move?", "What is the most illegal thing you have done?", "Who was your first crush?", "What conspiracy theory do you secretly believe?", "Who in this room is the best liar?", "What is your most toxic trait?", "What is the worst text you've ever accidentally sent?", "If you had a warning label, what would it say?", "What is the longest you've gone without showering?", "What is your favorite curse word?", "What is a song that instantly makes you cry?", "What is your biggest irrational fear?", "If you could read one person's mind, whose?", "If you had to delete all apps but three, which three stay?", "What is your strategy in a horror movie?", "If you could be instantly fluent in any language, which one?", "Who is the last person you stalked on social media?", "What is your go-to order at a dive bar?", "If we were in a bank heist, what would your role be?"
            ],
            quotes: [
                { text: "Friendship is born at that moment when one person says to another, 'What! You too?'", author: "C.S. Lewis" }, { text: "Good times and crazy friends make the best memories.", author: "Unknown" }, { text: "A true friend is someone who thinks that you are a good egg even though he knows that you are slightly cracked.", author: "Bernard Meltzer" }, { text: "There is nothing better than a friend, unless it is a friend with chocolate.", author: "Linda Grayson" }, { text: "It is the privilege of friendship to talk nonsense, and to have her nonsense respected.", author: "Charles Lamb" }, { text: "Friends are the family you choose.", author: "Jess C. Scott" }, { text: "A good friend will help you move. But a best friend will help you move a dead body.", author: "Jim Hayes" }
            ],
            dynamics: [ 
                { title: "Hot Take:", body: "Voice notes are just phone calls for cowards. Text or call, don't make me listen to a podcast of your life." }, { title: "Hot Take:", body: "Tipping culture has gone too far. You shouldn't have to tip for someone turning an iPad around at a coffee shop." }, { title: "Hot Take:", body: "You should not be forced to hang out with your partner's friends if you don't like them." }, { title: "Hot Take:", body: "Ghosting is a perfectly acceptable way to end a talking stage of less than 3 dates." }, { title: "Hot Take:", body: "Splitting the check evenly is unfair if one person ordered an appetizer and three cocktails, and the other ordered a salad." }, { title: "Hot Take:", body: "Pineapple absolutely belongs on pizza." }, { title: "Hot Take:", body: "Die Hard is NOT a Christmas movie." }, { title: "Hot Take:", body: "Friends (TV Show) is vastly overrated and hasn't aged well." }, { title: "Hot Take:", body: "Dogs are better companions than cats. Period." }, { title: "Hot Take:", body: "It is incredibly rude to recline your seat on an airplane in economy class." }, { title: "Hot Take:", body: "The person who pays on a first date gets to pick the venue." }, { title: "Hot Take:", body: "Staying friends with an ex is a bad idea 99% of the time." }, { title: "Hot Take:", body: "Looking through your partner's phone is a violation of trust, even if you find something." }, { title: "Hot Take:", body: "Money absolutely buys happiness, up to about $100,000 a year." }
            ],
            skills: [ 
                { title: "Open a Bottle Without an Opener", body: "Use the edge of a lighter or a spoon as a lever under the cap." }, { title: "The Perfect High Five", body: "Look at the other person's ELBOW, not their hand. You will never miss." }, { title: "Saber a Champagne Bottle", body: "Find the seam of the bottle. Chill the neck. Slide a blunt knife along the seam and hit the lip firmly." }, { title: "Exit a Boring Conversation", body: "Say 'I need to grab a drink/food/bathroom' or 'I see [Name], I need to say hi.'" }, { title: "Remove Red Wine Stains", body: "Pour white wine or salt on the stain immediately to absorb it." }, { title: "Whistle with Fingers", body: "Make an 'A' shape with index and middle fingers. Fold tongue back. Blow over the tongue." }, { title: "Rip an Apple in Half", body: "Grip apple with palms, thumbs on top. Pull apart with chest muscles, rolling palms outward." }, { title: "Coin Knuckle Roll", body: "Balance coin on index finger. Use thumb to push it over middle finger. Catch with ring finger. Practice." }, { title: "Zippo Snap Start", body: "Hold Zippo by the lid. Snap fingers, hitting the wheel. It lights instantly." }, { title: "Beer Mat Flip", body: "Place beer mat on edge of table. Flip it 180 degrees with back of hand and catch it." }, { title: "Cool a Beer Fast", body: "Wrap the bottle/can in a wet paper towel and put it in the freezer for 15 minutes." }, { title: "Relieve Brain Freeze", body: "Press your tongue flat against the roof of your mouth to warm up the nerves." }, { title: "Look Good in Photos", body: "Push your forehead slightly forward and down. Put your tongue behind your front teeth. Breathe out." }, { title: "Remember Drinks", body: "Assign a visual number to people. Person 1 is a Bun (Beer). Person 2 is a Shoe (Wine). Simple memory palace." }, { title: "Light a Match with One Hand", body: "Fold the matchbook cover back. Press the matchhead inside against the striker. Squeeze and pull." }
            ],
            ad_text: "Spice up the party.",
            ad_link: "Get the 'Cards Against Humanity' Game &rarr;"
        },
        work: {
            title: "Team Sync",
            subtitle: "Align the crew, solve problems, win the day.",
            tags: ["Warm Up", "Check-In", "Mindset", "Discussion", "Humor", "Growth", "Kudos", "Focus", "Trivia"],
            btns: ["Next Question", "Pick Order", "Inspire Me", "Next Topic", "Break Tension", "Next Tip", "Give Props", "Set Goal"],
            checkin: ["‚úÖ <strong>Done:</strong> A win or completed task from yesterday.", "üéØ <strong>Focus:</strong> Your #1 priority for today.", "üöß <strong>Roadblock:</strong> Anything slowing you down or in your way?"],
            
            praise: [
                "Who deserves a shoutout today for going above and beyond?",
                "Name a teammate who helped you out when you were overwhelmed this week.",
                "What is one quiet contribution someone made recently that we missed?",
                "Give props to someone who brought a great attitude to work today.",
                "Who on the team solved a difficult problem recently?"
            ],
            goal: [
                "What is the ONE thing we must accomplish before Friday?",
                "If we can only fix one roadblock this week, which should it be?",
                "What metric or goal are we focusing on improving today?",
                "What does a 'winning day' look like for the team today?",
                "Is everyone clear on their top priority for the week?"
            ],

            iceBreakers: [ 
                "What was the very first job you ever had?", "What is one tool or item you absolutely need to do your job well?", "Best career/life advice you ever received?", "What is your favorite way to decompress after a long shift?", "What is one skill you want to learn this year?", "What was the first thing you bought with your own money?", "Who is a leader or mentor you admire?", "What is the best team you have ever been a part of?", "What is your favorite work snack?", "How do you handle a highly stressful moment?", "What is one thing you are proud of accomplishing this month?", "What is one thing you would change about our industry as a whole?", "What is the most valuable lesson you've learned from a mistake?", "If you could have a 3-day weekend or higher pay, which would you pick?", "What music or podcast keeps you going during the day?", "What is a hill you are willing to die on professionally?", "What is the best professional compliment you've received?", "What is your biggest pet peeve in the workplace?", "If you could automate one part of your job, what would it be?", "What is the most useful app on your phone for work?", "What is the best team outing you've ever been on?", "What is your 'weird' productivity hack?", "What is the most difficult challenge you overcame at work?", "What is your favorite way to celebrate a big win?", "Who on the team makes you laugh the most?", "If you could work from any city in the world, where?", "What is one non-work hobby you are passionate about?", "What is the most important quality in a good manager?"
            ],
            quotes: [
                { text: "Individual commitment to a group effort‚Äîthat is what makes a team work.", author: "Vince Lombardi" }, { text: "Alone we can do so little; together we can do so much.", author: "Helen Keller" }, { text: "It is not the strongest of the species that survives, but the most adaptable.", author: "Charles Darwin" }, { text: "Amateurs sit and wait for inspiration, the rest of us just get up and go to work.", author: "Stephen King" }, { text: "Coming together is a beginning. Keeping together is progress. Working together is success.", author: "Henry Ford" }, { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" }, { text: "The secret of change is to focus all of your energy, not on fighting the old, but on building the new.", author: "Socrates" }, { text: "You don't have to be great to start, but you have to start to be great.", author: "Zig Ziglar" }, { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" }, { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" }
            ],
            dynamics: [ 
                { title: "Safety & Wellbeing", body: "Is everyone feeling 100% today? Are there any hazards or burnout risks we need to address?" }, { title: "The Roadblock", body: "Is there a process, rule, or lack of resources that is making our jobs harder than they need to be?" }, { title: "Retrospective", body: "What went really well yesterday/last week?" }, { title: "Retrospective", body: "What is one thing that didn't go well recently, and what did we learn from it?" }, { title: "Client / Customer Focus", body: "What is the biggest complaint or request we hear from the people we serve?" }, { title: "Culture", body: "How can we make it more fun to work here?" }, { title: "Future", body: "Where do we want this team to be in 6 months?" }, { title: "Communication", body: "Are we communicating too much, too little, or just right?" }, { title: "Onboarding", body: "If someone started working here tomorrow, what is the first thing they need to know?" }, { title: "Priorities", body: "Are we focused on the right things right now, or are we getting distracted by the small stuff?" }, { title: "The Wishlist", body: "If we had budget for one new piece of equipment, tool, or software, what should it be?" }, { title: "Feedback", body: "What is one thing leadership can do better to support you?" }, { title: "Knowledge Sharing", body: "What is a shortcut or trick you learned recently that everyone should know?" }, { title: "Bottleneck", body: "Where do our tasks or projects usually get stuck?" }, { title: "Success Metrics", body: "How do we know if we had a 'good day'?" }, { title: "Morale", body: "On a scale of 1-5, what is the stress level of the team today?" }, { title: "Open Floor", body: "Does anyone have anything on their mind they need to get off their chest?" }
            ],
            skills: [ 
                { title: "Box Breathing", body: "In for 4s, Hold for 4s, Out for 4s, Hold for 4s. Instantly lowers heart rate in stressful situations." }, { title: "The 2-Minute Rule", body: "If a quick task takes less than 2 minutes (taking out trash, sending a text), do it instantly. Don't let small things pile up." }, { title: "De-escalation", body: "When someone is angry, lower your voice, validate their frustration ('I hear you'), and focus on the solution, not the blame." }, { title: "Saying 'No' Politely", body: "Say: 'I can't prioritize that right now without dropping other balls. Which would you like me to do first?'" }, { title: "Efficient Huddles", body: "No agenda, no meeting. Always end a huddle with clear action items: Who is doing what by when?" }, { title: "Task Batching", body: "Group similar tasks together. Do all your prep work, or all your phone calls, in one block of time to save mental energy." }, { title: "Praise Publicly, Correct Privately", body: "Never discipline or correct a teammate in front of others. Always save it for a private, respectful conversation." }, { title: "Active Listening", body: "Listen to understand, not to reply. Wait 2 seconds after someone finishes speaking before you talk." }, { title: "The Eisenhower Matrix", body: "Sort tasks: Urgent/Important (Do now), Not Urgent/Important (Schedule for later), Urgent/Not Important (Delegate), Neither (Delete)." }, { title: "Lift with Your Legs", body: "Keep your back straight, bend at the hips and knees, and keep the load close to your body. Protect your spine." }, { title: "The 5 Why's", body: "When a problem happens, ask 'Why?' 5 times to get to the root cause, not just the symptom." }, { title: "Eat the Frog", body: "Do your hardest, most dreaded task first thing in the morning. The rest of the day is easy." }, { title: "Clear Communication", body: "BLUF: Bottom Line Up Front. Put the main point in the first sentence, then give details." }, { title: "The Check-Back", body: "When receiving complex instructions, repeat them back in your own words to ensure understanding." }, { title: "Boundary Setting", body: "Protect your time off. Do not check work channels when you are not being paid to work." }, { title: "Keyboard Shortcuts", body: "Learn Ctrl+C, Ctrl+V, Alt+Tab, and Ctrl+Z. It saves hours of mouse-clicking over a year." }, { title: "Clean Workspace", body: "A cluttered physical space creates a cluttered mental state. Reset your space at the end of every shift." }, { title: "The 80/20 Rule", body: "20% of your efforts yield 80% of your results. Focus on the high-impact tasks." }, { title: "Handling Mistakes", body: "Own it immediately. Do not make excuses. Say: 'I made a mistake, here is how I am fixing it.'" }
            ],
            ad_text: "Boost your team's mindset.",
            ad_link: "Get 'Atomic Habits' by James Clear &rarr;"
        }
    };

    // ==========================================
    // LOGIC & FUNCTIONALITY
    // ==========================================
    let currentMode = 'family';
    let participants = 4;
    let usedIndices = { iceBreaker: [], quote: [], dynamic: [], skill: [], praise: [], goal: [] };

    window.onload = () => {
        const savedMode = localStorage.getItem('meetingMode');
        if(savedMode && db[savedMode]) {
            setMode(savedMode);
        } else {
            setMode('family');
        }
    };

    function setMode(mode) {
        currentMode = mode;
        localStorage.setItem('meetingMode', mode);
        document.body.setAttribute('data-mode', mode);
        
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-' + mode).classList.add('active');

        const d = db[mode];
        document.getElementById('app-title').innerText = d.title;
        document.getElementById('app-subtitle').innerText = d.subtitle;
        
        // 9 Cards = 9 Tags
        document.getElementById('tag-1').innerText = d.tags[0];
        document.getElementById('tag-2').innerText = d.tags[1];
        document.getElementById('tag-3').innerText = d.tags[2];
        document.getElementById('tag-4').innerText = d.tags[3];
        document.getElementById('tag-6').innerText = d.tags[5];
        document.getElementById('tag-7').innerText = d.tags[6]; // Connection
        document.getElementById('tag-8').innerText = d.tags[7]; // Goals
        document.getElementById('tag-9').innerText = d.tags[8]; // Fact
        
        // Buttons
        document.getElementById('btn-1').innerText = d.btns[0];
        document.getElementById('btn-3').innerText = d.btns[2];
        document.getElementById('btn-4').innerText = d.btns[3];
        document.getElementById('btn-6').innerText = d.btns[5];
        document.getElementById('btn-7').innerText = d.btns[6];
        document.getElementById('btn-8').innerText = d.btns[7];

        const list = document.getElementById('list-checkin');
        list.innerHTML = '';
        d.checkin.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = item;
            list.appendChild(li);
        });

        document.getElementById('checkInOrder').innerText = "";
        document.getElementById('ad-text').innerText = d.ad_text;
        document.getElementById('ad-link').innerText = d.ad_link;

        usedIndices = { iceBreaker: [], quote: [], dynamic: [], skill: [], praise: [], goal: [] };

        // INITIAL LOAD: 9 Cards Auto-Populate
        generate('iceBreaker');
        generate('quote');
        generate('dynamic');
        generate('skill');
        generate('praise');
        generate('goal');
        generateJoke();
        generateFact();
    }

    function generate(type) {
        const d = db[currentMode];
        let pool = [];
        
        if (type === 'iceBreaker') pool = d.iceBreakers;
        else if (type === 'quote') pool = d.quotes;
        else if (type === 'dynamic') pool = d.dynamics;
        else if (type === 'skill') pool = d.skills;
        else if (type === 'praise') pool = d.praise;
        else if (type === 'goal') pool = d.goal;

        if (!pool || pool.length === 0) return;

        let index;
        let attempts = 0;
        do {
            index = Math.floor(Math.random() * pool.length);
            attempts++;
            if (usedIndices[type].length >= pool.length) { usedIndices[type] = []; break; }
        } while (usedIndices[type].includes(index) && attempts < 100);
        
        usedIndices[type].push(index);
        const item = pool[index];
        const container = document.getElementById('content-' + type);

        const newContainer = container.cloneNode(false);

        if (type === 'quote') {
            newContainer.innerHTML = `<p class="quote-style">"${item.text}"<br><span style="font-size:0.85rem; font-weight:normal;">- ${item.author}</span></p>`;
        } else if (typeof item === 'string') {
            newContainer.innerHTML = `<p>${item}</p>`;
        } else {
            newContainer.innerHTML = `<h3>${item.title}</h3><p>${item.body}</p>`;
        }

        container.parentNode.replaceChild(newContainer, container);
    }

    function generateJoke() {
        const container = document.getElementById('content-joke');
        const newContainer = container.cloneNode(false);
        newContainer.innerHTML = "Thinking...";
        container.parentNode.replaceChild(newContainer, container);

        fetch('https://official-joke-api.appspot.com/random_joke')
            .then(r => r.json())
            .then(data => { newContainer.innerHTML = `<p><strong>${data.setup}</strong><br><em>${data.punchline}</em></p>`; })
            .catch(() => { newContainer.innerHTML = "<p>Why did the developer go broke? He used up all his cache.</p>"; });
    }

    // THE RESTORED FACT API
    function generateFact() {
        const container = document.getElementById('content-fact');
        const newContainer = container.cloneNode(false);
        newContainer.innerHTML = "Thinking...";
        container.parentNode.replaceChild(newContainer, container);

        fetch('https://uselessfacts.jsph.pl/random.json?language=en')
            .then(r => r.json())
            .then(data => { newContainer.innerHTML = `<p>${data.text}</p>`; })
            .catch(() => { newContainer.innerHTML = "<p>Did you know honey never spoils? Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still edible.</p>"; });
    }

    function adjustCount(change) {
        participants += change;
        if (participants < 2) participants = 2;
        if (participants > 20) participants = 20;
        document.getElementById('count-display').innerText = participants + " People";
    }

    function generateOrder() {
        let arr = [];
        for(let i=1; i<=participants; i++) arr.push(i);
        arr.sort(() => Math.random() - 0.5);
        document.getElementById('checkInOrder').innerText = "Order: Person " + arr.join(" ‚Üí ");
    }
</script>

</body>
</html>
